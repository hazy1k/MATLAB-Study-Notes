# 第一章 MATLAB基础知识

## 1. 一般运算符和操作符

一般运算符和操作符构成运算的基本的操作指令，如加+减-乘**除/和乘方^等运算，这些操作指令几乎在所有计算机语言中都有，且大同小异。在MATLAB中，几乎所有的操作都是以矩阵为基本运算单元的，这与其他计算机语言有很大不同，也是MATLAB的重要特点

### 1.1 运算符

#### 1.1.1 矩阵的加减法

其基本形式为X±Y， X和Y必须为同维的矩阵，此时各对应元素相加减。如果X与Y的维数不相同，则MATLAB将给出错误信息，提示用户两个矩阵的维数不匹配。

```matlab
X = [2 3;4 5];
Y = [3 4;4 3];
Z1 = X + Y;
Z2 = X - Y;
```

#### 1.1.2 矩阵的乘法运算

X *Y是两个矩阵X和Y的乘积，其中X和Y必须满足矩阵相乘的条件，即矩阵X的列数必须等于矩阵Y的行数。如果其中一个为1×1矩阵也合法，此时便是将每一个矩阵的元素都分别与这个数值相乘。

```matlab
X = [2 3;4 5];
Y = [3 4;4 3];
Z = X*Y;
Z1 = X*2;
```

#### 1.1.3 矩阵的数组乘法运算

X.*Y的运算结果为两个矩阵的相应元素相乘，得到的结果与X和Y同维，此时X和Y也必须有相同的维数，除非其中一个为1×1矩阵，此时运算法则与X *Y相同。

```matlab
X = [2 3;4 5];
Y = [3 4;4 3];
Z = X.*Y;
Z1 = 2.*X;
```

#### 1.1.4 矩阵的乘方运算

1. x^Y表示，如果x为数，而Y为方阵，结果由各特征值和特征向量计算得到。

2. X^y表示，如果X是方阵、 y是一个大于1的整数，所得结果由X重复相乘y次得到；如果y不是整数，则将计算各特征值和特征向量的乘方。

3. 如果X和Y都是矩阵，或者X和Y不是方阵，则会显示错误信息

```matlab
X = [2 3;4 5];
Y = [3 4;4 3];
Z = X^2;
Z1 = X^1.5;
Z2 = 2^Y;
```

#### 1.1.5 矩阵的数组乘方运算

X.^Y的运算结果为X中元素对Y中对应元素求幂，形成的矩阵与原矩阵维数相等，这里X和Y必须维数相等，或其中一个为数，此时运算法则等同于X^Y。

```matlab
X = [2 3;4 5];
Y = [3 4;4 3];
Z = X.^Y;
```

#### 1.1.6 矩阵的左除运算

A\B称作矩阵A左除矩阵B，其运算结果基本与INV(A)B相同，但其算法却是不相同的。如果A是N×N的方阵，而B是N维列向量，或是由若干N维列向量组成的矩阵，则X=A\B是方程AX=B的解， X与B的大小相同，对于X和B的每个列向量，都有AX(n)=B(n)，此解是由高斯消元法得到的。很显然， A\EYE(SIZE(A))=INV(A)EYE(SIZE(A)) =INV(A)。如果A是M×N的矩阵（M≠N）， B是M维列向量或由若干M维列向量组成的矩阵，则X=A\B是欠定或超定方程AX=B的最小二乘解。 A的有效秩L由旋转的正交三角（QR）分解得到，并至多在每列L个零元素上求解。

```matlab
X = [1 2; 3 4];
Y = [2 3; 3 2];
Z = X\Y;
```

#### 1.1.7 矩阵的右除运算

B/A称为矩阵A右除矩阵B，其运算结果基本与B*INV(A)相同，但其算法是不同的，可以由左除运算得到，即B/A=(A'\B')'。它实际上是方程XA=B的解。

```matlab
X = [1 2; 3 4];
Y = [2 3; 3 2];
Z = Y/X;
Z1 = (X'\Y')';
```

#### 1.1.8 矩阵的点除运算

如果B和A都是矩阵，且维数相同，则B./A就是B中的元素除以A中的对应元素，所得结果矩阵的大小与B和A都相同；如果B和A中有一个为数，则使此数与相应的矩阵中的每个元素进行运算，结果矩阵与参加运算的矩阵大小相同。

```matlab
X = [1 2; 3 4];
Y = [2 3; 3 2];
Z = Y./X;
Z1 = Y./2;
```

#### 1.1.9 矩阵的Kronecker张量积运算

K=kron(A,B)返回A和B的张量积，取值为矩阵A和B的元素间所有的可能积。如果A是m×n矩阵，而B是p×q矩阵，则kron(A,B)是mp×nq的矩阵。如A是2×2的矩阵，则有下式成立。

kron(A,B)=[A(1,1)*B    A(1,2)*B    A(2,1)*B    A(2,2)*B]

如果A和B中有一个为稀疏矩阵，则只有非零元素会参与运算，所得的结果亦是稀疏矩阵。

```matlab
A = [1, 2; 3, 4];
B = [0, 5; 6, 7];
C = kron(A, B);
```

### 1.2 操作符

#### 1.2.1 冒号":"

此符号在矩阵的构造和运算中非常有用，它可以用来产生向量，用作矩阵的下标（也称索引），以及部分地选择矩阵的元素，进行行循环操作等

1.  **生成连续序列**

```matlab
% 默认步长=1
x = 1:5;       % [1 2 3 4 5]
y = 5:-1:1;    % [5 4 3 2 1]（负步长）

% 指定步长
z = 1:2:9;     % [1 3 5 7 9]（步长=2）
w = 0:0.5:2;   % [0 0.5 1 1.5 2]
```

2. 索引数组

```matlab
A = [1 2 3; 4 5 6; 7 8 9];

% 取整行/整列
row2 = A(2, :);   % 第2行 → [4 5 6]
col3 = A(:, 3);   % 第3列 → [3; 6; 9]

% 全选维度
B = A(:);         % 将A展开为列向量 → [1;4;7;2;5;8;3;6;9]
C = A(:, :);      % 等价于原矩阵A
```

3. 循环控制

```matlab
% 遍历步长为2的数列
for k = 1:2:10
    disp(k);  % 输出 1, 3, 5, 7, 9
end
```

4. 多维数组操作

```matlab
% 三维数组
D = cat(3, [1 2;3 4], [5 6;7 8]);

% 取第三维第1页的所有行和列
page1 = D(:,:,1); % → [1 2; 3 4]
```

5. 生成等差数列

```matlab
t = linspace(0, 1, 5);  % 0到1的5等分 → [0 0.25 0.5 0.75 1]
% 等价于
t = 0:0.25:1;           % 效果相同
```

6. 动态扩展数组

```matlab
A = [];
A(end+1, :) = [1 2 3];  % 添加新行 → [1 2 3]
A(end, :) = [4 5 6];    % 修改最后一行 → [4 5 6]
```

7. 逻辑占位符

```matlab
% 表示"所有元素"或"默认范围"
sum_all = sum(A(:));          % 计算所有元素的和
reshape(A, [], 1);            % 展开为列向量
```

#### 1.2.2 百分号"%"

百分号在M文件和命令行中表示注释，即在一行中百分号后面的语句都被忽略而不被执行。在M文件中，百分号后面的语句可以用help命令输出。

#### 1.2.3 续行符"..."

如果一条命令很长，一行容不下，可以用3个或更多的点加在一行的末尾，表示此行未完，而在下一行继续。

#### 1.2.4 单引号“ ’ ”

表示矩阵的转置。

#### 1.2.5 分号";"

分号用在“[]”内，表示矩阵中行的结尾；也可以用在每行命令的结尾，它不会返回结果。分号还可以用在M文件中控制命令的显示，并压缩输出篇幅

## 2. 数据格式显示

虽然在MATLAB系统中数据的存储和计算都是以双精度数方式进行的，但其显示格式却可以有不同的形式。在MATLAB的命令行中通常可以利用format命令来调整数据的不同显示格式。 format命令的格式和作用如下。

1. format：默认值，数据显示格式与short格式相同。

2. format short：短格式，只显示5位数。对于小于1000且大于0.0001的小数，则整数部分会按数据的原格式显示，而小数只会显示到小数点后面4位，如123.45678即显示123.4568；对于大于1000或小于0.0001的小数，其显示格式与format short e相同，即小数部分只显示5位数，如输入0.00001便会显示1.0000e-005，而输入1000.123456则会显示1.0001e+003，而对于整数，绝对值小于10e9则按原样输出，而大于等于10e9的数则其显示格式与format short e相同。可以通过实验来比较它与format short e之间的联系与区别。

3. format long：长格式，显示15位数。也就是将所有的小数都用e格式输出， e左边为15位数，如输入1.2则会输出1.200000000000000e+000，这与format long e格式基本相同；而对于整数，绝对值小于10e9的数按原样输出，而大于等于10e9的数则按e格式输出，如输入10000则显示10000，而输入-1000000000则显示-1.000000000000000e+009。

4. format short e：短格式e方式，对于任意小数采用e格式，只显示5位小数，如输入1.2则会显示1.2000e+000；对于整数，其显示格式与format short格式相同。

5. format long e：长格式e方式，显示15位小数。对于任意小数都会采用e格式显示，如输入1.2则显示1.200000000000000e+000；对于整数，其显示格式参照format short。

6. format short g：最优化短格式，最多显示5位数，系统会根据数据的大小和形式采用比较好的显示数据的方式，如略去小数后面的零等。如输入1.234e1则显示12.34，输入1234.5678则显示1234.6，输入1234567.8888则显示1.2346e+006，输入0.02000则显示0.02等，其显示方式看起来比较灵活和更加合理。对于整数的显示方式，可以参照format short格式。

7. format long g：最优化长格式，最多显示15位数。其显示规则大体与format short g相同，现举例加以说明。输入1.2则显示1.2，输入1.2345678900则显示1.23456789，输入1.234567890123456789则显示1.23456789012346，输入1234567890123456.1234567则显示1.23456789012346e+015。

8. format hex：十六进制格式。显示二进制双精度数的十六进制形式，如输入1.2则显示3ff3333333333333，输入-2.3456则显示c002c3c9eecbfb16。

9. format bank：货币格式。保留小数点后两位小数，对于整数亦是如此。但并不是简单的四舍五入法，如输入0.355则显示0.36，而是输入0.345则显示0.34；对于任意整数其后都显示两位小数，如输入1则显示1.00。

10. format rat：有理格式。对于整数则照常显示，而对于小数则用两个整数相除的方式显示。如输入0.5和1/2则都会显示1/2，输入6.33333则显示19/3。注意：用有理小数表示分数是有一定精度要求的，如输入6.3333则只会显示63333/10000，而不会显示19/3。

11. format +：紧密格式。用“+”“-”或空格表示数据为正、负或零。如输入1-2则会显示“-”，输入3则会显示“+”，输入0则会输出一个空格。

```matlab
clear;
clc;

format bank;
a = ([123.4567 3;3.845678 5]);
disp(a);
```

## 3. 关系运算符

关系运算符主要用来对数与矩阵、矩阵与矩阵进行比较，并返回反映二者之间大小关系的由数0和1组成的矩阵。基本的关系运算符主要有6个： >、 <、 >=、 <=、 ==、 ~=。下面分别介绍它们的用法。

### 3.1 大于">"

A>B，如果矩阵A中的元素大于矩阵B中相应位置的元素，则在输出矩阵的此位置上输出1，反之则输出0；如果其中之一为数值，则将这个数与另一对象的每一个元素进行比较。

函数gt(A,B)亦是判断A是否大于B， A和B可以是矩阵、数值或任意其他的对象。

```matlab
clear;
clc;

A = [1 2 3; 4 5 6; 7 8 9];
B = [3 2 1; 6 5 4; 9 8 7];
gt(A,B);
```

### 3.2 小于“<”

A<B，如果矩阵A中的元素小于矩阵B中相应位置的元素，则在输出矩阵的此位置上输出1，反之则输出0；如果其中之一为数值，则将这个数与另一对象的每一个元素进行比较。

函数lt(A,B)亦是判断A是否小于B， A和B可以是矩阵、数值或任意其他的对象。

```matlab
clear;
clc;

A = [1 2 3; 4 5 6; 7 8 9];
B = [3 2 1; 6 5 4; 9 8 7];
lt(A,B);

```

### 3.3 大于或等于“>=”

A>=B，如果矩阵A中的元素大于或等于矩阵B中相应位置的元素，则在输出矩阵的此位置上输出1，反之则输出0；如果其中之一为数值，则将这个数与另一对象的每一个元素进行比较。

函数ge(A,B)亦是判断A是否大于或等于B， A和B可以是矩阵、数值或任意其他的对象。

### 3.4 小于或等于“<=”

A<=B，如果矩阵A中的元素小于或等于矩阵B中相应位置的元素，则在输出矩阵的此位置上输出1，反之则输出0；如果其中之一为数值，则将这个数与另一对象的每一个元素进行比较。

函数le(A,B)亦是判断A是否小于或等于B， A和B可以是矩阵、数值或任意其他的对象。

### 3.5 等于“==”

A==B，如果A和B都为矩阵，则A和B必须具有相同的维数，运算时将A中的元素和B中的对应元素进行比较，如果两者相等，则在输出矩阵的对应位置输出1，反之输出0。如果A和B其中之一为数值，则将这个数与另一对象的每一个元素进行比较。无论何种情况，返回结果都是参与运算的矩阵有相同维数的由0和1组成的矩阵。其余关系运算中对A和B的要求与返回结果的维数所满足的条件亦是如此。

函数eq(A,B)亦是对A和B进行比较，看是否相等。其中， A和B可以是矩阵或数值，也可以是其他的对象，如figure对象。

```matlab
clear;
clc;

A = [1 2 3; 4 5 6; 7 8 9];
B = [3 2 1; 6 5 4; 9 8 7];
eq(A,B);

```

### 3.6 不等于“~=”

A~=B，与A==B相反，如果A和B中相同位置上的对应元素不相等，则在输出矩阵的对应位置输出1，反之输出0。由此可见，所得矩阵中的0和1应该与A==B得到的矩阵中0和1的位置相互颠倒。

同样，函数ne(A,B)对A和B进行比较，也可以用于对两个矩阵进行比较。

## 4. 逻辑运算和逻辑函数

逻辑运算和逻辑函数在计算机语言中是普遍存在的，在MATLAB中包含与、或、非、异或4种基本的逻辑运算。逻辑表达式和逻辑函数的值应该为逻辑“真”或“假”。 MATLAB系统在给出逻辑运算的结果时，以“1”代表“真”，以“0”代表“假”；但在判断一个量是否为“真”时，以“0”代表“假”，以任意的非零数代表“真”。 MATLAB的逻辑运算也是以矩阵为基本运算单元的。

### 4.1 逻辑运算

符号“&” “|” “~” “xor”分别代表逻辑运算中的与、或、非、异或，它们作用于数组元素。 “0”代表逻辑“假”，而任意非零数代表逻辑“真”。逻辑运算的运算法则如下。

● 在逻辑数组中， “0”代表逻辑“假”， “1”代表逻辑“真”。

● 如果两个标量a和b参与运算，则逻辑运算的运算规则如表2-1所示。

● 如果两个维数相同的矩阵参与运算，则将A和B相同位置上的元素按标量逻辑运算的规则进行计算，结果返回与矩阵A和B同样大小的矩阵，其元素由同位置上的A和B的元素进行逻辑运算的结果所决定。

● 如果标量a和矩阵A参与运算，则将a和A中的所有元素进行逻辑运算，返回结果是由0和1组成的与A具有同样维数的矩阵。

● 在逻辑运算符、关系运算符和计算运算符三者中，逻辑运算符的优先级最低，但是逻辑“非”的优先级最高。

● 在逻辑“与”“或”“非”三者中， “与”的优先级高于“或”的优先级，且都低于“非”的优先级。● 通过增加“()”可以改变各运算符之间的优先级。

● 在逻辑运算符、关系运算符和计算运算符三者中，逻辑运算符的优先级最低，但是逻辑“非”的优先级最高。

● 在逻辑“与”“或”“非”三者中， “与”的优先级高于“或”的优先级，且都低于“非”的优先级。● 通过增加“()”可以改变各运算符之间的优先级。

![屏幕截图 2025-03-11 162815.png](https://raw.githubusercontent.com/hazy1k/My-drawing-bed/main/2025/03/11-16-28-28-屏幕截图%202025-03-11%20162815.png)

### 4.2 逻辑函数

MATLAB从3.0版本开始提供逻辑函数，这些函数对交互运算和进行矩阵变换非常有用，可以很方便地查找或替换矩阵中满足一定条件的部分或所有元素。只有在使用过程中认真体会每个函数的具体用法，大家才能在实际应用过程中灵活运用。

#### 4.2.1 all()函数：判断是否所有元素都为非零数

如果要获得矩阵或向量中非零元素的位置或个数，可以利用all()函数。此函数对于向量a（行向量或列向量），如果向量中的每个元素都是非零数， all(a)返回逻辑“真”，即“1”；如果至少一个元素为零，则返回逻辑“假”，即“0”。对于矩阵A， all(A)是作用于列向量上的，即如果矩阵A的某列的所有元素都是非零数，则返回结果的当前列为逻辑“真”，即“1”；如果至少有一个为零，则返回结果的当前列为逻辑“假”，即“0”。显然，返回结果为与矩阵A具有同列维的行向量。如果A是多维矩阵，则all(A)将是以第1个不是单维的维作为向量进行运算，运算规则同向量运算规则。 all(A,dim)将指定的第dim维作为向量进行运算。

```matlab
clear;
clc;

A = [0 2 3; 4 5 6; 7 8 9];
r = all(A);
b = A>=1;
disp(b);
```

#### 4.2.2 any()函数：判断是否有一个向量元素为非零数

在矩阵处理中，有时候需要判断矩阵中的元素是否有零或非零数，如在对矩阵进行数组除时，就需要判断作为除数的矩阵是否有零元素， any()函数可以实现这一功能。此函数有3种调用格式： any(a)、any(A)、 any(A,dim)。对于向量a（行向量或列向量），如果向量中至少有一个元素为非零数， any(a)返回逻辑“真”，即“1”；而如果所有元素都为零，则返回逻辑“假”，即“0”。对于矩阵A， any(A)与all(A)一样，也是作用于列向量上的，即如果矩阵A的某列中存在某个元素为非零数，则返回结果的当前列为逻辑“真”，即“1”；如果所有元素都为

零，则返回结果的当前列为逻辑“假”，即“0”。如果A是多维矩阵，则any(A)将第1个不是单维的维作为向量进行运算，运算规则同向量运算规则。 any(A,dim)将指定的第dim维作为向量进行计算。

```matlab
clear;
clc;

A = [0 1 2; 0 3 4];
disp(A);

a = any(A);
disp(a);

b = any(A, 3);
disp(b);

```

#### 4.2.3 find()函数：找出向量或矩阵中非零元素的位置标识

在许多情况下，都需要对矩阵中符合某一特定条件的元素的位置进行定位，如将某一矩阵中为零的元素设为1等。如果这个矩阵的元素非常多，手工修改就非常麻烦，而灵活运用find()函数和各种逻辑及关系运算可以实现绝大多数条件下的元素定位。 find()函数的基本用法有 k=find(A)、 [i,j]=find(A)、 [i,j,v]=find(A)，它是一个很有用的逻辑函数，在对数组元素进行查找、替换和修改变化等操作中占有非常重要的地位，熟练运用该函数可以方便而灵活地对数组进行操作。

k=find(A)：此函数返回由矩阵A的所有非零元素的位置标识组成的向量。如果没有非零元素则会返回空值。

## 4. 字符串操作

## 4.1 MATLAB中的字符串符号

在MATLAB中，要建立一个字符串变量，可以写成S='字符串'，即用' '将输入的字符串括起来，注意不是" "，这与其他的一些高级语言不同。而要建立一个字符串矩阵，则输入如下。

```matlab
clear;
clc;

text = ['string1' 'string2' ...
        'string3'];

```

### 4.2 一般通用字符串操作

通用字符串操作包括字符串与ASCII码间的转换、字符串与数据间的转换、字符串大小写间的转换、字符串中空格的删除等，这些操作都是非常常用和基本的字符串操作。其他高级语言中的字符串操作一般都含有这些操作，因而可以称之为通用字符串操作。

#### 4.2.1 将整数数组转换为字符串

s=string(A)：其中A为正整数数组，这个函数的作用是将整数数组转换为字符串，字符串中字符的ASCII码即A中相应的元素值。

```matlab
clear;
clc;

text = ['string1' 'string2' ...
        'string3'];
a = [84 104 105 115 32 105 115 32 97 110 32 101 120 97 109 112 108 101];
A = string(char(a));

```

#### 4.2.2 将字符串转换成ASCII码

bs(S)： S为字符串，此函数返回S的每个字符的ASCII码，结果是一个整数矩阵，可以当作一般的矩阵处理

```matlab
clear;
clc;

info = {'MY' 'name' 'is' '李'};
k = char(info);
cellstr(k); % 将字符串矩阵转换为单元矩阵
b = abs(k); % 将字符串转换成ASCII码
```

#### 4.2.3 输出空格

blanks(n)函数用于输出n个空格。此函数在调整输出格式、输出多个空格时很有用，可以精确地输出需要的空格。它通常与disp()函数一起使用，对输出格式进行调整。

#### 4.2.4 将字符串进行大小写转换

upper(s)函数用于将字符串或字符串矩阵s中的所有的小写字母转换成大写字母，原有的大写字母保持不变。

lower(s)函数用于将字符串或字符串矩阵s中的所有的大写字母转换成小写字母，原有的小写字母保持不变。

### 4.3 字符串比较操作

字符串比较操作主要涉及对字符串按字母顺序进行比较以及对字符串进行匹配、查找、替换、提取子串等一系列的操作。这些是比较有用的操作，也可以归入调用命令部分，下面来详细讲解。

#### 4.3.1 比较两个字符串

strcmp('string1', 'string2')：将两个字符串进行比较，如果两个字符串相等，此函数返回逻辑“真”，否则返回逻辑“假”，即此函数只能判断两个字符串是否相等，而不能判断按字母顺序谁在谁前面。

strcmp(C1,C2)：如果C1和C2都是由字符串组成的大小相同的单元矩阵，则此函数返回一个与单元矩阵相同大小的逻辑矩阵。如果单元矩阵C1和C2相同位置上的字符串相同，则在逻辑矩阵的相应位置上输出1，否则输出0。 C1和C2其中之一或二者全部都可以为字符串或字符串矩阵，但返回的逻辑矩阵与单元矩阵大小相同。

#### 4.3.2 比较字符串的前n个字符

strncmp('string1','string2',n)：如果两个字符串的前n个字符相同，则此函数返回逻辑“真”，否则返回逻辑“假”，比较函数对大小写敏感。

strncmp(C1,C2,n)：如果C1和C2为由字符串组成的大小相同的单元矩阵，则此函数将相同位置的字符串的前n个字符进行比较。如果相同就在相同位置输出1，否则输出0；如其中之一为字符串，则将单元矩阵中的所有字符串都与这个字符串进行比较，返回与单元矩阵大小相同的逻辑矩阵。

```matlab
clear;
clc;

s1 = 'Matlab';
s2 = 'MATLAB';
r = strncmp(s1, s2, 3);

```

## 5. 数值数据类型

## 6. 函数的简明介绍
